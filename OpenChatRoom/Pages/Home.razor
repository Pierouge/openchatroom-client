@page "/"
@layout Layout.EmptyLayout
@inject NavigationManager Navigation
@inject ApiClient apiClient
@inject Blazored.SessionStorage.ISyncSessionStorageService sessionStorage
@inject Blazored.LocalStorage.ISyncLocalStorageService localStorage

Redirecting...

@code{
    protected async override Task OnInitializedAsync(){

        // TODO: login check

        // Connect check
        try{
            if(await ConnectionService.checkConnection(sessionStorage, localStorage, apiClient)){
                    Navigation.NavigateTo("login");
                }
            else Navigation.NavigateTo("connect");
        }
        catch(NavigationException){ // Catch the first error, as it crashes the whole system
            throw; // Then rethrow the error so Blazor still navigates to the next page
        }
    }
}
